<style>
    .main-content {
        margin-left: 250px;
        margin-top: 70px;
        padding: 2rem;
        min-height: calc(100vh - 120px);
        background-color: #f8f9fa;
        color: #333;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    .error-message{
        color: red;
        font-size: smaller;
    }
</style>

<!-- cropper JS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css">

<%-include ('../../../views/partials/admin/header')%>
    <section class="main-content">
        <h2 class="content-title">Add New Product</h2>

        <form id="addProductForm">

            <div>
                <label for="product_name" class="form-label">Product Name</label>
                <input type="text" placeholder="Type here" 
                       name="productName" class="form-control border" 
                       id="productName">
                <div id="productName-error" class="error-message"></div>
            </div>
            

            <div>
                <label class="form-label">Brand</label>
                <select class="form-select border" name="brand">
                    <% for(let i=0;i< brand.length;i++){ %>
                        <option value="<%= brand[i].brandName %>">
                            <%= brand[i].brandName %>
                        </option>
                        <%}%>
                </select>
                <div id="brand-error" class="error-message"></div>
            </div>


            <div>
                <label class="form-label">Full description</label>
                <textarea placeholder="Type here" name="productDescription" 
                          class="form-control border"rows="4"></textarea>
                <div id="description-error" class="error-message"></div>
            </div>


            <div>
                <label class="form-label">Regular price</label>
                <input placeholder="$" name="regularPrice" 
                       type="text" class="form-control border">
                <div id="regularPrice-error" class="error-message"></div>
            </div>


            <div>
                <label class="form-label">Sale price</label>
                <input placeholder="$" name="salePrice" 
                       type="text" class="form-control border">
                <div id="salePrice-error" class="error-message"></div>
            </div>

            
            <div>
                <label class="form-label">Quantity</label>
                <input placeholder="" name="quantity" 
                       type="text" class="form-control border">
                <div id="quantity-error" class="error-message"></div>
            </div>


            <div>
                <label class="form-label">Color</label>
                <input name="color" type="text" class="form-control border">
                <div id="color-error" class="error-message"></div>
            </div>


            <div>
                <label class="form-label">Category</label>
                <select class="form-select border" style="width: 150px;" name="category">
                <% for(let i=0;i< category.length;i++){ %>
                    <option value="<%= category[i].name %>">
                        <%= category[i].name %>
                    </option>
                    <% } %>
             </select>
            <div id="category-error" class="error-message"></div>
            </div>

            
            <h1>Choose images</h1>
            <div id="input-field-error" class="error-message"></div>
            <% for (let i = 0; i < 4; i++) { %>
            <input name="images" type="file" class="imageInput form-control border" id="imageInputField<%= i %>" accept="image/*"><br>
            <div id="preview<%= i %>" class="previewContainer"></div>
            <% } %>

            <div style="height: 3rem;"></div>
            <button type="submit" id="submitBtn" class="btn btn-success">Add Product</button>
        </form>

        <script>

            const form=document.getElementById('addProductForm');
            form.addEventListener('submit',(event)=>{
                event.preventDefault();
                const formData=new FormData(form);


                fetch('/admin/add-products2',{
                    method:'post',
                    body:formData
                }).then(res=>{
                    if(res.ok){
                        window.location.href='/admin/products';
                    }else{
                        alert('submission failed')
                    }
                })
            })
        </script>

    </section>
    <%-include ('../../../views/partials/admin/footer')%>