<!-- <link rel="stylesheet" href="/user/forgot-password.css"> -->



<!-- <div class="auth-container">
  <div class="auth-card">
    <div class="auth-header">
      <h1>Reset Your Password</h1>
    </div>

    <form method="post" action="/forgot-email-valid" onsubmit="return validateLoginForm()" class="auth-form">
      <div class="form-group">
        <label for="email" class="form-label">Email Address</label>
        <div class="input-group">
          <span class="input-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
              <path d="M.05 3.555A2 2 0 0 1 2 2h12a2 2 0 0 1 1.95 1.555L8 8.414.05 3.555ZM0 4.697v7.104l5.803-3.558L0 4.697ZM6.761 8.83l-6.57 4.027A2 2 0 0 0 2 14h12a2 2 0 0 0 1.808-1.144l-6.57-4.027L8 9.586l-1.239-.757Zm3.436-.586L16 11.801V4.697l-5.803 3.546Z"/>
            </svg>
          </span>
          <input class="form-control" name="email" placeholder="your@email.com" type="email" id="email">
        </div>



        <% if (message && message.length> 0) { %>
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            <%= message %>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        <% } %>
        <div class="error-message" id="email-error"></div>
      </div>

      <button type="submit" class="btn btn-primary w-100">
        <span class="btn-text">Verify</span>
        <span class="btn-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>
          </svg>
        </span>
      </button>
    </form>

    <div class="auth-footer">
      <p>Remember your password? <a href="/login" class="auth-link">Sign in</a></p>
      <p class="text-muted">Don't have an account? <a href="/signup" class="auth-link">Sign up</a></p>
    </div>
  </div>
</div> -->
<!-- <div>
  <h1>Reset Your Password</h1>
  <form id="emailForm">
    <div>
      <label for="">Enter your Email</label>
      <input type="email" name="email" id="email">
      <small id="email-error"></small>
      <button type="submit">Verify Email</button>
    </div>
  </form>
</div> -->
<style>
  /* Container */
.reset-container {
  max-width: 400px;
  margin: 80px auto;
  padding: 25px;
  background: #ffffff;
  border-radius: 12px;
  box-shadow: 0 5px 15px rgba(0,0,0,0.1);
  text-align: center;
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
}

/* Heading */
.reset-container h1 {
  font-size: 1.8rem;
  margin-bottom: 20px;
  color: #333;
}

/* Form group */
.form-group {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  margin-bottom: 20px;
  width: 100%;
}

/* Label */
.form-group label {
  margin-bottom: 8px;
  font-weight: 500;
  color: #555;
}

/* Input */
.form-group input {
  width: 100%;
  padding: 10px 12px;
  border: 1px solid #ccc;
  border-radius: 8px;
  font-size: 1rem;
  transition: border-color 0.3s;
}

.form-group input:focus {
  outline: none;
  border-color: #3085d6;
  box-shadow: 0 0 5px rgba(48,133,214,0.4);
}

/* Error message */
.form-group small {
  color: #d33;
  font-size: 0.85rem;
  margin-top: 5px;
  display: none;
}

/* Button */
.btn {
  width: 100%;
  padding: 12px;
  background: #3085d6;
  color: white;
  font-size: 1rem;
  font-weight: 500;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: background 0.3s;
}

.btn:hover {
  background: #2674c2;
}

</style>
<div class="reset-container">
  <h1>Reset Your Password</h1>
  <form id="emailForm" class="form-box">
    <div class="form-group">
      <label for="email">Enter your Email</label>
      <input type="email" name="email" id="email" placeholder="Enter your email">
      <small id="email-error"></small>
    </div>
    <button type="submit" class="btn">Verify Email</button>
  </form>
</div>


<script>

  document.getElementById('emailForm').addEventListener('submit',async (e)=>{
    e.preventDefault();

    if(validateLoginForm()){
      const email=document.getElementById('email').value;
      const response=await fetch('/forgot-password/verify-email',{
        method:"POST",
        headers:{
          'Content-Type':'application/json'
        },
        body:JSON.stringify({email})
      })

      const result=await response.json()
      if(response.ok){
        if(result.success){
          Swal.fire({
            title:"Email verified",
            icon:"success",
            showConfirmButton:true,
            timer:1000
          }).then(()=>{
            window.location.href=result.redirectUrl;
          })
        }else{
          Swal.fire("Oops",result.message,"warning")
        }
      }else{
        Swal.fire("Failed",result.message,"error")
      }
    }
  })
   function validateLoginForm() {
       const emailInput = document.getElementById('email');
       const emailError = document.getElementById('email-error');
       const emailValue = emailInput.value.trim();
       const emailPattern = /^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/;


       if (emailValue === '') {
           emailError.textContent = 'Please enter your email.';
           return false;
       } else if (!emailValue.match(emailPattern)) {
           emailError.textContent = 'Please enter a valid email address.';
           return false;
       } else {
           emailError.textContent = '';
           return true;
       }
   }
</script>
<%- include("../../views/partials/user/footer") %>







